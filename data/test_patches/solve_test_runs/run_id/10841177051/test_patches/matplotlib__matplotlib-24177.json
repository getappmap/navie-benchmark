{
  "edit_test_file": "lib/matplotlib/tests/test_category.py",
  "test_patch": "diff --git a/lib/matplotlib/tests/test_histogram_density.py b/lib/matplotlib/tests/test_histogram_density.py\nnew file mode 100644\nindex 0000000..7f408dd\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_histogram_density.py\n@@ -0,0 +1,22 @@\n+import numpy as np\n+import matplotlib.pyplot as plt\n+import unittest\n+\n+class TestHistogramDensity(unittest.TestCase):\n+    def test_hist_density_scaling(self):\n+        scale = 1.2\n+        test_random = np.random.randn(100000) * scale\n+\n+        fig, ax = plt.subplots(1, 2, figsize=(20, 10))\n+        hist_bar = ax[0].hist(test_random, bins=100, density=True, histtype=\"bar\")\n+        hist_step = ax[1].hist(test_random, bins=100, density=True, histtype=\"step\")\n+\n+        # Check if the maximum density value for 'step' is less than 'bar'\n+        max_density_bar = max(hist_bar[0])\n+        max_density_step = max(hist_step[0])\n+\n+        self.assertEqual(max_density_step, max_density_bar,\n+                         \"Density for 'step' histtype is not auto-scaled correctly.\")\n+\n+if __name__ == '__main__':\n+    unittest.main()\n\\ No newline at end of file\n",
  "inverted_patch": "diff --git a/lib/matplotlib/tests/test_histogram_density_inverted.py b/lib/matplotlib/tests/test_histogram_density_inverted.py\nnew file mode 100644\nindex 0000000..2c86b44\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_histogram_density_inverted.py\n@@ -0,0 +1,23 @@\n+import numpy as np\n+import matplotlib.pyplot as plt\n+import unittest\n+\n+class TestHistogramDensity(unittest.TestCase):\n+    def test_hist_density_scaling(self):\n+        scale = 1.2\n+        test_random = np.random.randn(100000) * scale\n+\n+        fig, ax = plt.subplots(1, 2, figsize=(20, 10))\n+        hist_bar = ax[0].hist(test_random, bins=100, density=True, histtype=\"bar\")\n+        hist_step = ax[1].hist(test_random, bins=100, density=True, histtype=\"step\")\n+\n+        # Check if the maximum density value for 'step' is less than 'bar'\n+        max_density_bar = max(hist_bar[0])\n+        max_density_step = max(hist_step[0])\n+\n+        # Alter the test to fail when the issue is observed\n+        if max_density_step == max_density_bar:\n+            raise AssertionError(\"__BUG__HERE__\")\n+\n+if __name__ == '__main__':\n+    unittest.main()\n\\ No newline at end of file\n"
}