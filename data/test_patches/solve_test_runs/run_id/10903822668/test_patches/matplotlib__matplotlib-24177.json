{
  "edit_test_file": "lib/matplotlib/tests/test_image.py",
  "test_patch": "diff --git a/lib/matplotlib/tests/test_hist_density_scaling.py b/lib/matplotlib/tests/test_hist_density_scaling.py\nnew file mode 100644\nindex 0000000..5e75a70\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_hist_density_scaling.py\n@@ -0,0 +1,22 @@\n+import numpy as np\n+import matplotlib.pyplot as plt\n+import unittest\n+\n+class TestHistDensityScaling(unittest.TestCase):\n+    def test_hist_density_scaling_step(self):\n+        scale = 1.2\n+        test_random = np.random.randn(100000) * scale\n+\n+        fig, ax = plt.subplots(1, 2, figsize=(20, 10))\n+        hist_bar = ax[0].hist(test_random, bins=100, density=True, histtype=\"bar\")\n+        hist_step = ax[1].hist(test_random, bins=100, density=True, histtype=\"step\")\n+\n+        # Check if the y-limits are different, which indicates the issue\n+        ylims_bar = ax[0].get_ylim()\n+        ylims_step = ax[1].get_ylim()\n+\n+        # Assert that the y-limits are not the same, which reproduces the issue\n+        self.assertNotEqual(ylims_bar, ylims_step, \"Y-limits should differ due to the bug\")\n+\n+if __name__ == '__main__':\n+    unittest.main()\n\\ No newline at end of file\n",
  "inverted_patch": "diff --git a/lib/matplotlib/tests/test_hist_density_scaling_inverted.py b/lib/matplotlib/tests/test_hist_density_scaling_inverted.py\nnew file mode 100644\nindex 0000000..6b264cc\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_hist_density_scaling_inverted.py\n@@ -0,0 +1,22 @@\n+import numpy as np\n+import matplotlib.pyplot as plt\n+import unittest\n+\n+class TestHistDensityScaling(unittest.TestCase):\n+    def test_hist_density_scaling_step(self):\n+        scale = 1.2\n+        test_random = np.random.randn(100000) * scale\n+\n+        fig, ax = plt.subplots(1, 2, figsize=(20, 10))\n+        hist_bar = ax[0].hist(test_random, bins=100, density=True, histtype=\"bar\")\n+        hist_step = ax[1].hist(test_random, bins=100, density=True, histtype=\"step\")\n+\n+        # Check if the y-limits are different, which indicates the issue\n+        ylims_bar = ax[0].get_ylim()\n+        ylims_step = ax[1].get_ylim()\n+\n+        # Assert that the y-limits are the same, which should not happen due to the bug\n+        self.assertEqual(ylims_bar, ylims_step, \"__BUG__HERE__\")\n+\n+if __name__ == '__main__':\n+    unittest.main()\n\\ No newline at end of file\n"
}