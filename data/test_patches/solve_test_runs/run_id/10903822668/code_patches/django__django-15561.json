{
  "instance_id": "django__django-15561",
  "edit_test_file": "tests/schema/tests.py",
  "code_patch": "diff --git a/django/db/backends/base/schema.py b/django/db/backends/base/schema.py\nindex 9d6952d..50f347a 100644\n--- a/django/db/backends/base/schema.py\n+++ b/django/db/backends/base/schema.py\n@@ -1383,6 +1383,7 @@ class BaseDatabaseSchemaEditor:\n             \"error_messages\",\n             \"help_text\",\n             \"limit_choices_to\",\n+            \"choices\",  # Added 'choices' to non-database attributes\n             # Database-level options are not supported, see #21961.\n             \"on_delete\",\n             \"related_name\",\n",
  "test_patch": "diff --git a/tests/schema/test_alterfield_noop_sqlite.py b/tests/schema/test_alterfield_noop_sqlite.py\nnew file mode 100644\nindex 0000000..d95b4b2\n--- /dev/null\n+++ b/tests/schema/test_alterfield_noop_sqlite.py\n@@ -0,0 +1,31 @@\n+import unittest\n+from django.db import connection, models\n+from django.test import TransactionTestCase\n+\n+class AlterFieldNoopSQLiteTest(TransactionTestCase):\n+    available_apps = ['schema']\n+\n+    def test_alter_field_noop_sqlite(self):\n+        \"\"\"\n+        Test that altering a field to add/change choices on SQLite should be a no-op.\n+        \"\"\"\n+        class TestModel(models.Model):\n+            name = models.CharField(max_length=255)\n+\n+            class Meta:\n+                app_label = 'schema'\n+\n+        with connection.schema_editor() as editor:\n+            editor.create_model(TestModel)\n+\n+        # Capture the SQL executed during the alter operation\n+        with self.assertLogs('django.db.backends.schema', 'DEBUG') as cm:\n+            old_field = TestModel._meta.get_field('name')\n+            new_field = models.CharField(max_length=255, choices=[('A', 'Option A')])\n+            new_field.set_attributes_from_name('name')\n+            with connection.schema_editor() as editor:\n+                editor.alter_field(TestModel, old_field, new_field, strict=True)\n+\n+        # Check that SQL was generated, indicating the issue\n+        sql_statements = [record.getMessage() for record in cm.records]\n+        self.assertTrue(any('CREATE TABLE' in sql for sql in sql_statements))\n\\ No newline at end of file\n",
  "test_inverted_patch": "diff --git a/tests/schema/test_alterfield_noop_sqlite_inverted.py b/tests/schema/test_alterfield_noop_sqlite_inverted.py\nnew file mode 100644\nindex 0000000..fb35b1c\n--- /dev/null\n+++ b/tests/schema/test_alterfield_noop_sqlite_inverted.py\n@@ -0,0 +1,32 @@\n+import unittest\n+from django.db import connection, models\n+from django.test import TransactionTestCase\n+\n+class AlterFieldNoopSQLiteTest(TransactionTestCase):\n+    available_apps = ['schema']\n+\n+    def test_alter_field_noop_sqlite(self):\n+        \"\"\"\n+        Test that altering a field to add/change choices on SQLite should be a no-op.\n+        \"\"\"\n+        class TestModel(models.Model):\n+            name = models.CharField(max_length=255)\n+\n+            class Meta:\n+                app_label = 'schema'\n+\n+        with connection.schema_editor() as editor:\n+            editor.create_model(TestModel)\n+\n+        # Capture the SQL executed during the alter operation\n+        with self.assertLogs('django.db.backends.schema', 'DEBUG') as cm:\n+            old_field = TestModel._meta.get_field('name')\n+            new_field = models.CharField(max_length=255, choices=[('A', 'Option A')])\n+            new_field.set_attributes_from_name('name')\n+            with connection.schema_editor() as editor:\n+                editor.alter_field(TestModel, old_field, new_field, strict=True)\n+\n+        # Check that SQL was generated, indicating the issue\n+        sql_statements = [record.getMessage() for record in cm.records]\n+        if any('CREATE TABLE' in sql for sql in sql_statements):\n+            raise AssertionError(\"__BUG__HERE__\")\n\\ No newline at end of file\n",
  "num_sent_chars": 2613946,
  "num_received_chars": 70371,
  "elapsed_time": 505.74608039855957,
  "lint_repair_count": 2,
  "test_generation_attempts": 5,
  "code_generation_attempts": 9,
  "pass_to_pass": true,
  "pass_to_fail": true,
  "fail_to_pass": false,
  "code_patch_score": 2,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}