{
  "instance_id": "matplotlib__matplotlib-23314",
  "edit_test_file": null,
  "code_patch": "diff --git a/lib/mpl_toolkits/mplot3d/art3d.py b/lib/mpl_toolkits/mplot3d/art3d.py\nindex acbeca9..e27a024 100644\n--- a/lib/mpl_toolkits/mplot3d/art3d.py\n+++ b/lib/mpl_toolkits/mplot3d/art3d.py\n@@ -582,6 +582,8 @@ class Path3DCollection(PathCollection):\n         self.stale = True\n \n     def do_3d_projection(self):\n+        if not self.get_visible():\n+            return\n         xs, ys, zs = self._offsets3d\n         vxs, vys, vzs, vis = proj3d.proj_transform_clip(xs, ys, zs,\n                                                         self.axes.M)\n\ndiff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 9db44b7..54f76e8 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -187,10 +187,12 @@ class Axes3D(Axes):\n \n     def set_axis_off(self):\n         self._axis3don = False\n+        self.set_visible(False)\n         self.stale = True\n-\n+    \n     def set_axis_on(self):\n         self._axis3don = True\n+        self.set_visible(True)\n         self.stale = True\n \n     def convert_zunits(self, z):\n@@ -387,8 +389,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        if not self.get_visible():\n+            return\n         self._unstale_viewLim()\n-\n+    \n         # draw the background patch\n         self.patch.draw(renderer)\n         self._frameon = False\n",
  "test_patch": null,
  "test_inverted_patch": null,
  "num_sent_chars": 2261882,
  "num_received_chars": 20497,
  "elapsed_time": 405.44034934043884,
  "lint_repair_count": 1,
  "test_generation_attempts": 9,
  "code_generation_attempts": 1,
  "pass_to_pass": true,
  "pass_to_fail": false,
  "fail_to_pass": false,
  "code_patch_score": 1,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}