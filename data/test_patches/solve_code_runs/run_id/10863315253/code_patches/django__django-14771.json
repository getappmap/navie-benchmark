{
  "instance_id": "django__django-14771",
  "edit_test_file": "tests/utils_tests/test_autoreload.py",
  "code_patch": "diff --git a/django/utils/autoreload.py b/django/utils/autoreload.py\nindex cc65c04..d882562 100644\n--- a/django/utils/autoreload.py\n+++ b/django/utils/autoreload.py\n@@ -220,6 +220,8 @@ def get_child_arguments():\n     py_script = Path(sys.argv[0])\n \n     args = [sys.executable] + ['-W%s' % o for o in sys.warnoptions]\n+    # Add -X options from sys._xoptions\n+    args += ['-X%s' % key if value is True else '-X%s=%s' % (key, value) for key, value in sys._xoptions.items()]\n     # __spec__ is set when the server was started with the `-m` option,\n     # see https://docs.python.org/3/reference/import.html#main-spec\n     # __spec__ may not exist, e.g. when running in a Conda env.\n",
  "test_patch": "diff --git a/tests/utils_tests/test_reloader_xoptions.py b/tests/utils_tests/test_reloader_xoptions.py\nnew file mode 100644\nindex 0000000..fa31526\n--- /dev/null\n+++ b/tests/utils_tests/test_reloader_xoptions.py\n@@ -0,0 +1,21 @@\n+import unittest\n+from unittest import mock\n+import sys\n+from django.utils import autoreload\n+\n+class AutoReloaderXOptionsTests(unittest.TestCase):\n+    @mock.patch('django.utils.autoreload.restart_with_reloader')\n+    def test_x_options_passed(self, mock_restart_with_reloader):\n+        # Simulate the presence of -X utf8 option in sys._xoptions\n+        sys._xoptions = {'utf8': True}\n+\n+        # Run the autoreloader\n+        try:\n+            autoreload.run_with_reloader(lambda: None)\n+        except SystemExit as e:\n+            # Check if the SystemExit is raised due to the restart_with_reloader call\n+            self.assertTrue(mock_restart_with_reloader.called)\n+            self.assertEqual(e.code, mock_restart_with_reloader.return_value)\n+\n+        # Reset sys._xoptions to avoid side effects\n+        sys._xoptions = {}\n\\ No newline at end of file\n",
  "test_inverted_patch": "diff --git a/tests/utils_tests/test_reloader_xoptions_inverted.py b/tests/utils_tests/test_reloader_xoptions_inverted.py\nnew file mode 100644\nindex 0000000..27c19f1\n--- /dev/null\n+++ b/tests/utils_tests/test_reloader_xoptions_inverted.py\n@@ -0,0 +1,22 @@\n+import unittest\n+from unittest import mock\n+import sys\n+from django.utils import autoreload\n+\n+class AutoReloaderXOptionsTests(unittest.TestCase):\n+    @mock.patch('django.utils.autoreload.restart_with_reloader')\n+    def test_x_options_passed(self, mock_restart_with_reloader):\n+        # Simulate the presence of -X utf8 option in sys._xoptions\n+        sys._xoptions = {'utf8': True}\n+\n+        # Run the autoreloader\n+        try:\n+            autoreload.run_with_reloader(lambda: None)\n+        except SystemExit as e:\n+            # Check if the SystemExit is raised due to the restart_with_reloader call\n+            # Alter the assertion to fail when the issue is observed\n+            if mock_restart_with_reloader.called and e.code == mock_restart_with_reloader.return_value:\n+                raise AssertionError(\"__BUG__HERE__\")\n+\n+        # Reset sys._xoptions to avoid side effects\n+        sys._xoptions = {}\n\\ No newline at end of file\n",
  "num_sent_chars": 591323,
  "num_received_chars": 38077,
  "elapsed_time": 270.3722321987152,
  "lint_repair_count": 1,
  "test_generation_attempts": 0,
  "code_generation_attempts": 9,
  "pass_to_pass": true,
  "pass_to_fail": false,
  "fail_to_pass": false,
  "code_patch_score": 1,
  "appmap_data_test_status": "PASSED",
  "appmap_data_file_count": 1,
  "appmap_data_context_size": 508
}