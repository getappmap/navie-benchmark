{
  "instance_id": "sphinx-doc__sphinx-8459",
  "edit_test_file": "tests/test_ext_autodoc_mock.py",
  "code_patch": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex 278e47d..22fb462 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -560,6 +560,12 @@ class Documenter:\n                                   self.objtype, self.fullname, self.object,\n                                   self.options, docstringlines)\n \n+                # Apply type alias mapping if autodoc_typehints is set to \"description\"\n+                if self.config.autodoc_typehints == \"description\":\n+                    for i, line in enumerate(docstringlines):\n+                        for original, alias in self.config.autodoc_type_aliases.items():\n+                            docstringlines[i] = line.replace(original, alias)\n+\n                 if docstringlines and docstringlines[-1] != '':\n                     # append a blank line to the end of the docstring\n                     docstringlines.append('')\n",
  "test_patch": "diff --git a/tests/test_ext_autodoc_type_aliases.py b/tests/test_ext_autodoc_type_aliases.py\nnew file mode 100644\nindex 0000000..5e4b3f4\n--- /dev/null\n+++ b/tests/test_ext_autodoc_type_aliases.py\n@@ -0,0 +1,33 @@\n+import unittest\n+from sphinx.application import Sphinx\n+from sphinx.errors import ApplicationError\n+from io import StringIO\n+import os\n+\n+class TestAutodocTypeAliases(unittest.TestCase):\n+    def setUp(self):\n+        self.srcdir = os.path.abspath(os.path.dirname(__file__))\n+        self.outdir = os.path.join(self.srcdir, '_build')\n+        self.doctreedir = os.path.join(self.srcdir, '_doctrees')\n+        self.confdir = self.srcdir\n+\n+    def test_autodoc_type_aliases_with_description(self):\n+        with self.assertRaises(ApplicationError):\n+            app = Sphinx(\n+                srcdir=self.srcdir,\n+                confdir=self.confdir,\n+                outdir=self.outdir,\n+                doctreedir=self.doctreedir,\n+                buildername='html',\n+                confoverrides={\n+                    'extensions': ['sphinx.ext.autodoc', 'sphinx.ext.napoleon'],\n+                    'autodoc_typehints': 'description',\n+                    'autodoc_type_aliases': {'JSONObject': 'types.JSONObject'}\n+                },\n+                status=StringIO(),\n+                warning=StringIO()\n+            )\n+            app.build()\n+\n+if __name__ == '__main__':\n+    unittest.main()\n\\ No newline at end of file\n",
  "test_inverted_patch": null,
  "num_sent_chars": 2154694,
  "num_received_chars": 79554,
  "elapsed_time": 718.7056510448456,
  "lint_repair_count": 4,
  "test_generation_attempts": 9,
  "code_generation_attempts": 9,
  "pass_to_pass": true,
  "pass_to_fail": false,
  "fail_to_pass": false,
  "code_patch_score": 1,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}