{
  "edit_test_file": "astropy/io/ascii/tests/test_html.py",
  "test_patch": "diff --git a/astropy/io/ascii/tests/test_html_formats.py b/astropy/io/ascii/tests/test_html_formats.py\nnew file mode 100644\nindex 0000000..f043795\n--- /dev/null\n+++ b/astropy/io/ascii/tests/test_html_formats.py\n@@ -0,0 +1,50 @@\n+from astropy.table import Table\n+from io import StringIO\n+import unittest\n+\n+class TestHTMLFormatIssue(unittest.TestCase):\n+    def test_html_format_ignored(self):\n+        \"\"\"\n+        Test to reproduce the issue where the 'formats' argument is ignored\n+        when writing an Astropy table to HTML format.\n+        \"\"\"\n+        # Generate table\n+        t = Table([(1.23875234858e-24, 3.2348748432e-15), (2, 4)], names=('a', 'b'))\n+        tc = t.copy()  # Copy table\n+\n+        # Write HTML table with \"a\" column formatted to show 2 decimal places\n+        with StringIO() as sp:\n+            tc.write(sp, format=\"html\", formats={\"a\": lambda x: f\"{x:.2e}\"})\n+            output = sp.getvalue()\n+\n+        # Check that the output does not respect the formatting\n+        expected_output = \"\"\"\\\n+<html>\n+ <head>\n+  <meta charset=\"utf-8\"/>\n+  <meta content=\"text/html;charset=UTF-8\" http-equiv=\"Content-type\"/>\n+ </head>\n+ <body>\n+  <table>\n+   <thead>\n+    <tr>\n+     <th>a</th>\n+     <th>b</th>\n+    </tr>\n+   </thead>\n+   <tr>\n+    <td>1.23875234858e-24</td>\n+    <td>2</td>\n+   </tr>\n+   <tr>\n+    <td>3.2348748432e-15</td>\n+    <td>4</td>\n+   </tr>\n+  </table>\n+ </body>\n+</html>\n+\"\"\"\n+        self.assertEqual(output.strip(), expected_output.strip())\n+\n+if __name__ == '__main__':\n+    unittest.main()\n\\ No newline at end of file\n",
  "inverted_patch": "diff --git a/astropy/io/ascii/tests/test_html_formats_inverted.py b/astropy/io/ascii/tests/test_html_formats_inverted.py\nnew file mode 100644\nindex 0000000..32de479\n--- /dev/null\n+++ b/astropy/io/ascii/tests/test_html_formats_inverted.py\n@@ -0,0 +1,51 @@\n+from astropy.table import Table\n+from io import StringIO\n+import unittest\n+\n+class TestHTMLFormatIssue(unittest.TestCase):\n+    def test_html_format_ignored(self):\n+        \"\"\"\n+        Test to reproduce the issue where the 'formats' argument is ignored\n+        when writing an Astropy table to HTML format.\n+        \"\"\"\n+        # Generate table\n+        t = Table([(1.23875234858e-24, 3.2348748432e-15), (2, 4)], names=('a', 'b'))\n+        tc = t.copy()  # Copy table\n+\n+        # Write HTML table with \"a\" column formatted to show 2 decimal places\n+        with StringIO() as sp:\n+            tc.write(sp, format=\"html\", formats={\"a\": lambda x: f\"{x:.2e}\"})\n+            output = sp.getvalue()\n+\n+        # Check that the output respects the formatting\n+        expected_output = \"\"\"\\\n+<html>\n+ <head>\n+  <meta charset=\"utf-8\"/>\n+  <meta content=\"text/html;charset=UTF-8\" http-equiv=\"Content-type\"/>\n+ </head>\n+ <body>\n+  <table>\n+   <thead>\n+    <tr>\n+     <th>a</th>\n+     <th>b</th>\n+    </tr>\n+   </thead>\n+   <tr>\n+    <td>1.24e-24</td>\n+    <td>2</td>\n+   </tr>\n+   <tr>\n+    <td>3.23e-15</td>\n+    <td>4</td>\n+   </tr>\n+  </table>\n+ </body>\n+</html>\n+\"\"\"\n+        if output.strip() != expected_output.strip():\n+            raise AssertionError(\"__BUG__HERE__\")\n+\n+if __name__ == '__main__':\n+    unittest.main()\n\\ No newline at end of file\n"
}