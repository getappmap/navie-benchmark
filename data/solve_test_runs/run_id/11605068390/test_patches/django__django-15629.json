{
  "edit_test_file": "tests/schema/tests.py",
  "test_patch": "diff --git a/tests/schema/test_db_collation_foreign_keys.py b/tests/schema/test_db_collation_foreign_keys.py\nnew file mode 100644\nindex 0000000..d33a168\n--- /dev/null\n+++ b/tests/schema/test_db_collation_foreign_keys.py\n@@ -0,0 +1,51 @@\n+from django.db import connection\n+from django.db.models import CharField, ForeignKey, CASCADE\n+from django.test import TestCase, skipUnlessDBFeature\n+from django.db import models\n+\n+class DBCollationForeignKeyTests(TestCase):\n+    @skipUnlessDBFeature(\"supports_collation_on_charfield\")\n+    def test_db_collation_not_propagated_to_foreign_keys(self):\n+        \"\"\"\n+        db_collation specified on a primary key field should be propagated to \n+        foreign key fields that reference it.\n+        \"\"\"\n+        # Only run on MySQL where this is known to fail\n+        if connection.vendor != 'mysql':\n+            self.skipTest(\"This test only applies to MySQL.\")\n+\n+        # Create the models dynamically\n+        class Account(models.Model):\n+            id = CharField(\n+                primary_key=True,\n+                max_length=22,\n+                db_collation='utf8_bin',\n+                db_index=True\n+            )\n+\n+            class Meta:\n+                app_label = 'schema'\n+\n+        class Profile(models.Model):\n+            id = CharField(\n+                primary_key=True,\n+                max_length=22,\n+                db_collation='utf8_bin',\n+                db_index=True\n+            )\n+            account = ForeignKey(Account, on_delete=CASCADE)\n+\n+            class Meta:\n+                app_label = 'schema'\n+\n+        # Create the tables\n+        with connection.schema_editor() as editor:\n+            editor.create_model(Account)\n+            # This will fail because db_collation is not propagated to foreign key\n+            with self.assertRaises(Exception):\n+                editor.create_model(Profile)\n+\n+        # Clean up\n+        with connection.schema_editor() as editor:\n+            editor.delete_model(Profile)\n+            editor.delete_model(Account)\n\\ No newline at end of file\n",
  "inverted_patch": null
}