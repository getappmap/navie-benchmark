{
  "edit_test_file": "tests/test_ext_autodoc_configs.py",
  "test_patch": "diff --git a/tests/test_ext_napoleon_typehints.py b/tests/test_ext_napoleon_typehints.py\nnew file mode 100644\nindex 0000000..d8c7933\n--- /dev/null\n+++ b/tests/test_ext_napoleon_typehints.py\n@@ -0,0 +1,59 @@\n+\"\"\"\n+    test_ext_napoleon_typehints\n+    ~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+    Test the napoleon extension with typehints configuration.\n+\"\"\"\n+\n+import pytest\n+from sphinx.testing.util import SphinxTestApp\n+\n+@pytest.mark.sphinx('text', testroot='ext-autodoc',\n+                   confoverrides={\n+                       'extensions': [\n+                           'sphinx.ext.autodoc',\n+                           'sphinx.ext.napoleon'\n+                       ],\n+                       'autodoc_typehints': \"description\",\n+                       'autodoc_typehints_description_target': \"documented\",\n+                       'napoleon_numpy_docstring': False\n+                   })\n+def test_napoleon_typehints_description_documented(app: SphinxTestApp):\n+    # Create a Python module with our test function\n+    (app.srcdir / 'target' / 'napoleon_typehints.py').write_text('''\n+def example_func(param1: str, param2: int) -> bool:\n+    \"\"\"\n+    Description.\n+\n+    Parameters:\n+        param1: First parameter.\n+        param2: Second parameter.\n+\n+    Returns:\n+        The returned value.\n+    \"\"\"\n+    return True\n+''')\n+\n+    # Add the content to index.rst\n+    (app.srcdir / 'index.rst').write_text('''\n+.. automodule:: target.napoleon_typehints\n+   :members:\n+''')\n+\n+    # Build the documentation\n+    app.build()\n+\n+    # Read the built text file\n+    content = (app.outdir / 'index.txt').read_text()\n+\n+    # The return type (bool) should not appear in the output since\n+    # autodoc_typehints_description_target is set to \"documented\"\n+    assert 'bool' not in content\n+\n+    # The return description should still be present\n+    assert 'The returned value.' in content\n+\n+    # Verify that the return type information is missing from the output\n+    # This assertion should pass since we're reproducing the issue\n+    assert 'Return type:' not in content\n\\ No newline at end of file\n",
  "inverted_patch": "diff --git a/tests/test_ext_napoleon_typehints_inverted.py b/tests/test_ext_napoleon_typehints_inverted.py\nnew file mode 100644\nindex 0000000..2cbb7f7\n--- /dev/null\n+++ b/tests/test_ext_napoleon_typehints_inverted.py\n@@ -0,0 +1,61 @@\n+\"\"\"\n+    test_ext_napoleon_typehints\n+    ~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+    Test the napoleon extension with typehints configuration.\n+\"\"\"\n+\n+import pytest\n+from sphinx.testing.util import SphinxTestApp\n+\n+@pytest.mark.sphinx('text', testroot='ext-autodoc',\n+                   confoverrides={\n+                       'extensions': [\n+                           'sphinx.ext.autodoc',\n+                           'sphinx.ext.napoleon'\n+                       ],\n+                       'autodoc_typehints': \"description\",\n+                       'autodoc_typehints_description_target': \"documented\",\n+                       'napoleon_numpy_docstring': False\n+                   })\n+def test_napoleon_typehints_description_documented(app: SphinxTestApp):\n+    # Create a Python module with our test function\n+    (app.srcdir / 'target' / 'napoleon_typehints.py').write_text('''\n+def example_func(param1: str, param2: int) -> bool:\n+    \"\"\"\n+    Description.\n+\n+    Parameters:\n+        param1: First parameter.\n+        param2: Second parameter.\n+\n+    Returns:\n+        The returned value.\n+    \"\"\"\n+    return True\n+''')\n+\n+    # Add the content to index.rst\n+    (app.srcdir / 'index.rst').write_text('''\n+.. automodule:: target.napoleon_typehints\n+   :members:\n+''')\n+\n+    # Build the documentation\n+    app.build()\n+\n+    # Read the built text file\n+    content = (app.outdir / 'index.txt').read_text()\n+\n+    # The return type (bool) should appear in the output since\n+    # autodoc_typehints_description_target is set to \"documented\"\n+    # and the return value is documented\n+    if 'Return type: bool' not in content:\n+        raise AssertionError(\"__BUG__HERE__\")\n+\n+    # The return description should be present\n+    assert 'The returned value.' in content\n+\n+    # Since the return is documented, the return type information\n+    # should be present in the output\n+    assert 'Return type:' in content\n\\ No newline at end of file\n"
}