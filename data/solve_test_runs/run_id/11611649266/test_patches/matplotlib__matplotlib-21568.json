{
  "edit_test_file": "lib/matplotlib/tests/test_text.py",
  "test_patch": "diff --git a/lib/matplotlib/tests/test_datetime_usetex.py b/lib/matplotlib/tests/test_datetime_usetex.py\nnew file mode 100644\nindex 0000000..4f4723a\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_datetime_usetex.py\n@@ -0,0 +1,29 @@\n+from datetime import datetime\n+import numpy as np\n+import pytest\n+\n+import matplotlib as mpl\n+import matplotlib.pyplot as plt\n+from matplotlib.testing.decorators import image_comparison\n+\n+needs_usetex = pytest.mark.skipif(\n+    not mpl.checkdep_usetex(True),\n+    reason=\"This test needs a TeX installation\")\n+\n+@needs_usetex\n+@image_comparison(['datetime_usetex_spacing.png'])\n+def test_datetime_usetex_spacing():\n+    \"\"\"Test datetime axis spacing with usetex enabled.\"\"\"\n+    # Set usetex to True\n+    plt.rcParams['text.usetex'] = True\n+    \n+    # Create sample datetime data\n+    dates = np.array([datetime(2020, 1, 1, 0, i) for i in range(11)])\n+    data = np.random.RandomState(1).rand(11)\n+    \n+    # Create the plot\n+    fig, ax = plt.subplots(constrained_layout=True)\n+    ax.plot(dates, data)\n+    \n+    # The test will compare against a baseline image that captures\n+    # the current spacing behavior with usetex enabled\n\\ No newline at end of file\n",
  "inverted_patch": "diff --git a/lib/matplotlib/tests/test_datetime_usetex_inverted.py b/lib/matplotlib/tests/test_datetime_usetex_inverted.py\nnew file mode 100644\nindex 0000000..a99dce0\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_datetime_usetex_inverted.py\n@@ -0,0 +1,42 @@\n+from datetime import datetime\n+import numpy as np\n+import pytest\n+import matplotlib as mpl\n+import matplotlib.pyplot as plt\n+\n+def test_datetime_usetex_spacing():\n+    \"\"\"Test datetime axis spacing with usetex enabled.\"\"\"\n+    # Set usetex to True\n+    plt.rcParams['text.usetex'] = True\n+    \n+    # Create sample datetime data with specific time range\n+    dates = np.array([datetime(2020, 1, 1, 0, i) for i in range(11)])\n+    np.random.seed(1)\n+    data = np.random.rand(11)\n+    \n+    # Create the plot\n+    fig, ax = plt.subplots(constrained_layout=True)\n+    ax.plot(dates, data)\n+    \n+    # Get the tick positions and labels\n+    tick_positions = ax.get_xticks()\n+    tick_labels = [label.get_text() for label in ax.get_xticklabels()]\n+    \n+    # Calculate the average spacing between ticks\n+    tick_spacing = np.diff(tick_positions).mean()\n+    \n+    # Expected spacing based on v3.3 behavior (this value should be calibrated)\n+    expected_spacing = 100  # Example value, should be adjusted based on v3.3 behavior\n+    \n+    # Calculate the spacing difference percentage\n+    spacing_difference = abs((tick_spacing - expected_spacing) / expected_spacing) * 100\n+    \n+    # If spacing differs by more than 10% from expected, raise error\n+    if spacing_difference > 10:\n+        raise AssertionError(\"__BUG__HERE__\")\n+    \n+    # Clean up\n+    plt.close(fig)\n+\n+if __name__ == '__main__':\n+    test_datetime_usetex_spacing()\n\\ No newline at end of file\n"
}