{
  "edit_test_file": "tests/staticfiles_tests/test_storage.py",
  "test_patch": "diff --git a/tests/staticfiles_tests/test_manifest_storage_passes.py b/tests/staticfiles_tests/test_manifest_storage_passes.py\nnew file mode 100644\nindex 0000000..56b92b3\n--- /dev/null\n+++ b/tests/staticfiles_tests/test_manifest_storage_passes.py\n@@ -0,0 +1,39 @@\n+import os\n+import shutil\n+import tempfile\n+from unittest import mock\n+\n+from django.contrib.staticfiles.management.commands.collectstatic import Command as CollectstaticCommand\n+from django.contrib.staticfiles.storage import ManifestStaticFilesStorage\n+from django.core.management import call_command\n+from django.test import SimpleTestCase, override_settings\n+\n+class ZeroPassesManifestStaticFilesStorage(ManifestStaticFilesStorage):\n+    max_post_process_passes = 0\n+\n+class TestManifestStorageZeroPasses(SimpleTestCase):\n+    \"\"\"Test that setting max_post_process_passes to 0 raises UnboundLocalError during collectstatic.\"\"\"\n+\n+    @classmethod\n+    def setUpClass(cls):\n+        super().setUpClass()\n+        cls.temp_dir = tempfile.mkdtemp()\n+\n+    @classmethod\n+    def tearDownClass(cls):\n+        shutil.rmtree(cls.temp_dir)\n+        super().tearDownClass()\n+\n+    def test_zero_passes_raises_error(self):\n+        \"\"\"Test that setting max_post_process_passes to 0 raises UnboundLocalError during collectstatic.\"\"\"\n+        with override_settings(\n+            STATIC_ROOT=self.temp_dir,\n+            STATICFILES_STORAGE='staticfiles_tests.test_manifest_storage_passes.ZeroPassesManifestStaticFilesStorage'\n+        ):\n+            with self.assertRaises(UnboundLocalError) as cm:\n+                call_command('collectstatic', interactive=False, verbosity=0)\n+            \n+            self.assertEqual(\n+                str(cm.exception),\n+                \"local variable 'substitutions' referenced before assignment\"\n+            )\n\\ No newline at end of file\n",
  "inverted_patch": null
}