{
  "instance_id": "matplotlib__matplotlib-22719",
  "edit_test_file": "lib/matplotlib/tests/test_category.py",
  "code_patch": "diff --git a/lib/matplotlib/category.py b/lib/matplotlib/category.py\nindex c823b68..e64e836 100644\n--- a/lib/matplotlib/category.py\n+++ b/lib/matplotlib/category.py\n@@ -53,6 +53,9 @@ class StrCategoryConverter(units.ConversionInterface):\n         StrCategoryConverter._validate_unit(unit)\n         # dtype = object preserves numerical pass throughs\n         values = np.atleast_1d(np.array(value, dtype=object))\n+        # Check for empty data and return early\n+        if values.size == 0:\n+            return np.array([], dtype=float)\n         # pass through sequence of non binary numbers\n         with _api.suppress_matplotlib_deprecation_warning():\n             is_numlike = all(units.ConversionInterface.is_numlike(v)\n",
  "test_patch": "diff --git a/lib/matplotlib/tests/test_deprecation_warning.py b/lib/matplotlib/tests/test_deprecation_warning.py\nnew file mode 100644\nindex 0000000..92a29dc\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_deprecation_warning.py\n@@ -0,0 +1,13 @@\n+import unittest\n+import matplotlib.pyplot as plt\n+from matplotlib._api import MatplotlibDeprecationWarning\n+\n+class TestDeprecationWarning(unittest.TestCase):\n+    def test_empty_data_deprecation_warning(self):\n+        fig, ax = plt.subplots()\n+        ax.xaxis.update_units([\"a\", \"b\"])\n+        with self.assertWarns(MatplotlibDeprecationWarning):\n+            ax.plot([], [])\n+\n+if __name__ == \"__main__\":\n+    unittest.main()\n\\ No newline at end of file\n",
  "test_inverted_patch": "diff --git a/lib/matplotlib/tests/test_deprecation_warning_inverted.py b/lib/matplotlib/tests/test_deprecation_warning_inverted.py\nnew file mode 100644\nindex 0000000..fbd4d1b\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_deprecation_warning_inverted.py\n@@ -0,0 +1,14 @@\n+import unittest\n+import matplotlib.pyplot as plt\n+from matplotlib._api import MatplotlibDeprecationWarning\n+\n+class TestDeprecationWarning(unittest.TestCase):\n+    def test_empty_data_deprecation_warning(self):\n+        fig, ax = plt.subplots()\n+        ax.xaxis.update_units([\"a\", \"b\"])\n+        with self.assertRaises(AssertionError, msg=\"__BUG__HERE__\"):\n+            with self.assertWarns(MatplotlibDeprecationWarning):\n+                ax.plot([], [])\n+\n+if __name__ == \"__main__\":\n+    unittest.main()\n\\ No newline at end of file\n",
  "num_sent_chars": 552061,
  "num_received_chars": 12170,
  "elapsed_time": 166.10950994491577,
  "lint_repair_count": 0,
  "test_generation_attempts": 2,
  "code_generation_attempts": 1,
  "pass_to_pass": true,
  "pass_to_fail": true,
  "fail_to_pass": true,
  "code_patch_score": 3,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}