{
  "instance_id": "django__django-11728",
  "edit_test_file": "tests/db_functions/text/test_replace.py",
  "code_patch": "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 1ce4594..b5c2a1c 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -172,6 +172,9 @@ def replace_named_groups(pattern):\n             if unmatched_open_brackets == 0:\n                 group_pattern_and_name.append((pattern[start:end + idx], group_name))\n                 break\n+            # Ensure the loop continues to the end of the pattern if necessary\n+            if idx == len(pattern[end:]) - 1:\n+                group_pattern_and_name.append((pattern[start:end + idx + 1], group_name))\n \n             # Check for unescaped `(` and `)`. They mark the start and end of a\n             # nested group.\n",
  "test_patch": "diff --git a/tests/db_functions/text/test_simplify_regexp.py b/tests/db_functions/text/test_simplify_regexp.py\nnew file mode 100644\nindex 0000000..a0158e3\n--- /dev/null\n+++ b/tests/db_functions/text/test_simplify_regexp.py\n@@ -0,0 +1,10 @@\n+from django.test import TestCase\n+from django.contrib.admindocs.utils import replace_named_groups\n+\n+class SimplifyRegexpTests(TestCase):\n+\n+    def test_trailing_named_group_not_replaced(self):\n+        pattern = r'entries/(?P<pk>[^/.]+)/relationships/(?P<related_field>\\w+)'\n+        expected = r'entries/<pk>/relationships/(?P<related_field>\\w+)'\n+        result = replace_named_groups(pattern)\n+        self.assertEqual(result, expected)\n\\ No newline at end of file\n",
  "test_inverted_patch": null,
  "num_sent_chars": 1018677,
  "num_received_chars": 19936,
  "elapsed_time": 214.49644804000854,
  "lint_repair_count": 0,
  "test_generation_attempts": 9,
  "code_generation_attempts": 1,
  "pass_to_pass": true,
  "pass_to_fail": true,
  "fail_to_pass": false,
  "code_patch_score": 2,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}