{
  "instance_id": "matplotlib__matplotlib-24334",
  "edit_test_file": "lib/matplotlib/tests/test_tightlayout.py",
  "code_patch": "diff --git a/lib/matplotlib/axis.py b/lib/matplotlib/axis.py\nindex af0815d..f21d1a7 100644\n--- a/lib/matplotlib/axis.py\n+++ b/lib/matplotlib/axis.py\n@@ -2013,6 +2013,7 @@ class Axis(martist.Artist):\n         **kwargs\n             `.Text` properties for the labels. These take effect only if you\n             pass *labels*. In other cases, please use `~.Axes.tick_params`.\n+            Invalid Text properties will raise a ValueError.\n \n         Notes\n         -----\n@@ -2021,6 +2022,18 @@ class Axis(martist.Artist):\n         other limits, you should set the limits explicitly after setting the\n         ticks.\n         \"\"\"\n+        # Validate kwargs early - they must be valid Text properties\n+        if kwargs:\n+            try:\n+                test_text = mtext.Text(0, 0)\n+                test_text.update(kwargs)\n+            except (TypeError, ValueError) as e:\n+                raise ValueError(\n+                    f\"Invalid Text property in kwargs: {e}\") from e\n+            if labels is None:\n+                _api.warn_external(\"Text properties in kwargs are ignored without labels. \"\n+                                 \"Use tick_params() instead.\")\n+\n         result = self._set_tick_locations(ticks, minor=minor)\n         if labels is not None:\n             self.set_ticklabels(labels, minor=minor, **kwargs)\n",
  "code_files": null,
  "test_patch": "diff --git a/lib/matplotlib/tests/test_axis_ticks_validation.py b/lib/matplotlib/tests/test_axis_ticks_validation.py\nnew file mode 100644\nindex 0000000..c3da136\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_axis_ticks_validation.py\n@@ -0,0 +1,22 @@\n+import matplotlib.pyplot as plt\n+import pytest\n+\n+\n+def test_xticks_kwargs_validation():\n+    \"\"\"\n+    Test that invalid kwargs to set_xticks() are silently ignored when no labels\n+    are provided via the labels parameter, but are passed via xticklabels kwarg.\n+    \"\"\"\n+    fig, ax = plt.subplots()\n+\n+    # This should raise an error but currently doesn't - the invalid kwarg is silently ignored\n+    # The issue is that xticklabels is not validated since labels parameter is not used\n+    ax.set_xticks([0, 1], xticklabels=[\"a\", \"b\"])  # Invalid kwarg silently ignored\n+\n+    # Verify the ticks were set but labels were not changed \n+    assert list(ax.get_xticks()) == [0, 1]\n+    assert [t.get_text() for t in ax.get_xticklabels()] == ['0', '1']\n+\n+    # For comparison, when labels are provided directly, invalid kwargs do raise an error\n+    with pytest.raises(AttributeError):\n+        ax.set_xticks([0, 1], [\"a\", \"b\"], invalid_property=\"test\")\n\\ No newline at end of file\n",
  "test_inverted_patch": "diff --git a/lib/matplotlib/tests/test_axis_ticks_validation_inverted.py b/lib/matplotlib/tests/test_axis_ticks_validation_inverted.py\nnew file mode 100644\nindex 0000000..57d2711\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_axis_ticks_validation_inverted.py\n@@ -0,0 +1,24 @@\n+import matplotlib.pyplot as plt\n+import pytest\n+\n+\n+def test_xticks_kwargs_validation():\n+    \"\"\"\n+    Test that invalid kwargs to set_xticks() are properly validated regardless of how\n+    labels are provided. The test should fail if invalid kwargs are silently ignored.\n+    \"\"\"\n+    fig, ax = plt.subplots()\n+\n+    # This should raise an error when invalid kwargs are provided, even when labels\n+    # parameter is not used directly\n+    with pytest.raises(AttributeError, match=\"__BUG__HERE__\"):\n+        ax.set_xticks([0, 1], xticklabels=[\"a\", \"b\"], invalid_property=\"test\")\n+\n+    # For comparison - verify that valid usage still works as expected\n+    ax.set_xticks([0, 1], [\"a\", \"b\"])\n+    assert list(ax.get_xticks()) == [0, 1]\n+    assert [t.get_text() for t in ax.get_xticklabels()] == [\"a\", \"b\"]\n+\n+    # Also verify that invalid kwargs raise error when labels are provided directly\n+    with pytest.raises(AttributeError):\n+        ax.set_xticks([0, 1], [\"a\", \"b\"], invalid_property=\"test\")\n\\ No newline at end of file\n",
  "num_sent_chars": 16356915,
  "num_received_chars": 74384,
  "elapsed_time": 1815.9531874656677,
  "lint_repair_count": 4,
  "test_generation_attempts": 6,
  "code_generation_attempts": 9,
  "pass_to_pass": true,
  "pass_to_fail": true,
  "fail_to_pass": false,
  "code_patch_score": 2,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}