{
  "instance_id": "django__django-11049",
  "edit_test_file": "tests/model_fields/test_durationfield.py",
  "code_patch": "diff --git a/django/db/models/fields/__init__.py b/django/db/models/fields/__init__.py\nindex f32ce64..0cbab12 100644\n--- a/django/db/models/fields/__init__.py\n+++ b/django/db/models/fields/__init__.py\n@@ -1587,13 +1587,20 @@ class DurationField(Field):\n     empty_strings_allowed = False\n     default_error_messages = {\n         'invalid': _(\"'%(value)s' value has an invalid format. It must be in \"\n-                     \"[DD] [HH:[MM:]]ss[.uuuuuu] format.\")\n+                     \"[DD] [[HH:]MM:]ss[.uuuuuu] format.\")\n     }\n     description = _(\"Duration\")\n \n     def get_internal_type(self):\n         return \"DurationField\"\n \n+    def __init__(self, verbose_name=None, name=None, **kwargs):\n+        kwargs['help_text'] = kwargs.get('help_text', _(\n+            'Enter a duration in the format: [days] [[hours:]minutes:]seconds[.microseconds]. '\n+            'For example: \"2 15:30:45.123456\" is 2 days, 15 hours, 30 minutes, 45 seconds, and 123456 microseconds.'\n+        ))\n+        super().__init__(verbose_name, name, **kwargs)\n+\n     def to_python(self, value):\n         if value is None:\n             return value\n",
  "code_files": null,
  "test_patch": "diff --git a/tests/model_fields/test_duration_field_format.py b/tests/model_fields/test_duration_field_format.py\nnew file mode 100644\nindex 0000000..85e31a4\n--- /dev/null\n+++ b/tests/model_fields/test_duration_field_format.py\n@@ -0,0 +1,40 @@\n+import datetime\n+\n+from django import forms\n+from django.core import exceptions\n+from django.db import models\n+from django.test import SimpleTestCase\n+\n+from .models import DurationModel\n+\n+\n+class TestDurationFieldFormat(SimpleTestCase):\n+    def test_duration_field_format_message_inconsistency(self):\n+        \"\"\"\n+        Test that demonstrates the inconsistency between the error message format\n+        and actual accepted format for DurationField.\n+        \n+        The error message claims format should be \"[DD] [HH:[MM:]]ss[.uuuuuu]\"\n+        but the field actually accepts \"[DD] [[HH:]MM:]ss[.uuuuuu]\" format.\n+        \"\"\"\n+        field = models.DurationField()\n+        \n+        # This should be valid according to actual behavior\n+        # \"14:00\" is interpreted as 14 minutes, 0 seconds\n+        try:\n+            value = field.clean(\"14:00\", None)\n+            self.assertEqual(value, datetime.timedelta(minutes=14))\n+        except exceptions.ValidationError as e:\n+            self.fail(\"14:00 should be valid and interpreted as 14 minutes, \"\n+                     \"but got ValidationError: %s\" % e.messages[0])\n+        \n+        # The error message incorrectly suggests [HH:[MM:]]ss format\n+        # when actual behavior accepts [[HH:]MM:]ss format\n+        with self.assertRaises(exceptions.ValidationError) as cm:\n+            field.clean(\"invalid format\", None)\n+        \n+        self.assertEqual(\n+            cm.exception.message % cm.exception.params,\n+            \"'invalid format' value has an invalid format. \"\n+            \"It must be in [DD] [HH:[MM:]]ss[.uuuuuu] format.\"\n+        )\n\\ No newline at end of file\n",
  "test_inverted_patch": "diff --git a/tests/model_fields/test_duration_field_format_inverted.py b/tests/model_fields/test_duration_field_format_inverted.py\nnew file mode 100644\nindex 0000000..fe3e0ce\n--- /dev/null\n+++ b/tests/model_fields/test_duration_field_format_inverted.py\n@@ -0,0 +1,42 @@\n+import datetime\n+\n+from django import forms\n+from django.core import exceptions\n+from django.db import models\n+from django.test import SimpleTestCase\n+\n+from .models import DurationModel\n+\n+\n+class TestDurationFieldFormat(SimpleTestCase):\n+    def test_duration_field_format_message_inconsistency(self):\n+        \"\"\"\n+        Test that demonstrates the inconsistency between the error message format\n+        and actual accepted format for DurationField.\n+        \n+        The error message claims format should be \"[DD] [HH:[MM:]]ss[.uuuuuu]\"\n+        but the field actually accepts \"[DD] [[HH:]MM:]ss[.uuuuuu]\" format.\n+        This test should fail to highlight this inconsistency.\n+        \"\"\"\n+        field = models.DurationField()\n+        \n+        # First verify that \"14:00\" is actually valid and represents 14 minutes\n+        value = field.clean(\"14:00\", None)\n+        self.assertEqual(value, datetime.timedelta(minutes=14))\n+        \n+        # Now test the error message format\n+        try:\n+            field.clean(\"invalid format\", None)\n+        except exceptions.ValidationError as e:\n+            error_message = e.message % e.params\n+            expected_format = \"[DD] [[HH:]MM:]ss[.uuuuuu]\"  # This is the correct format\n+            actual_format = \"[DD] [HH:[MM:]]ss[.uuuuuu]\"    # This is what the error shows\n+            \n+            if actual_format in error_message:\n+                raise AssertionError(\"__BUG__HERE__: Error message shows incorrect format \"\n+                                   f\"'{actual_format}' when it should be '{expected_format}'\")\n+            \n+            self.assertIn(expected_format, error_message, \n+                         \"Error message should contain the correct format specification\")\n+        else:\n+            self.fail(\"ValidationError was expected but not raised\")\n\\ No newline at end of file\n",
  "num_sent_chars": 1869466,
  "num_received_chars": 20502,
  "elapsed_time": 252.49507355690002,
  "lint_repair_count": 0,
  "test_generation_attempts": 1,
  "code_generation_attempts": 3,
  "pass_to_pass": false,
  "pass_to_fail": true,
  "fail_to_pass": true,
  "code_patch_score": 2,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}