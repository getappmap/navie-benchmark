{
  "edit_test_file": "tests/dispatch/tests.py",
  "test_patch": "diff --git a/tests/dispatch/test_signal_send_robust_logging.py b/tests/dispatch/test_signal_send_robust_logging.py\nnew file mode 100644\nindex 0000000..2c4fd0f\n--- /dev/null\n+++ b/tests/dispatch/test_signal_send_robust_logging.py\n@@ -0,0 +1,48 @@\n+import logging\n+from django.dispatch import Signal\n+from django.test import SimpleTestCase\n+\n+\n+class SignalSendRobustLoggingTests(SimpleTestCase):\n+    \"\"\"Test that Signal.send_robust() doesn't log exceptions from receivers.\"\"\"\n+\n+    def setUp(self):\n+        self.signal = Signal()\n+        self.log_messages = []\n+        self.logger = logging.getLogger('django.dispatch')\n+        self.old_handlers = self.logger.handlers[:]\n+        for handler in self.logger.handlers:\n+            self.logger.removeHandler(handler)\n+        self.handler = logging.StreamHandler()\n+        self.handler.stream = self\n+        self.logger.addHandler(self.handler)\n+        self.logger.setLevel(logging.ERROR)\n+\n+    def tearDown(self):\n+        self.logger.handlers = self.old_handlers\n+\n+    def write(self, msg):\n+        self.log_messages.append(msg)\n+\n+    def test_exception_not_logged(self):\n+        \"\"\"\n+        Test that exceptions raised by signal receivers are not logged when using\n+        send_robust().\n+        \"\"\"\n+        def receiver_raising_error(**kwargs):\n+            raise ValueError(\"Receiver had an error\")\n+\n+        self.signal.connect(receiver_raising_error)\n+        \n+        # send_robust() should catch the exception but not log it\n+        results = self.signal.send_robust(sender=self)\n+        \n+        # Verify the exception was caught and returned\n+        self.assertEqual(len(results), 1)\n+        receiver, response = results[0]\n+        self.assertIs(receiver, receiver_raising_error)\n+        self.assertIsInstance(response, ValueError)\n+        self.assertEqual(str(response), \"Receiver had an error\")\n+        \n+        # Verify no error was logged\n+        self.assertEqual(len(self.log_messages), 0)\n\\ No newline at end of file\n",
  "inverted_patch": "diff --git a/tests/dispatch/test_signal_send_robust_logging_inverted.py b/tests/dispatch/test_signal_send_robust_logging_inverted.py\nnew file mode 100644\nindex 0000000..56bdd4a\n--- /dev/null\n+++ b/tests/dispatch/test_signal_send_robust_logging_inverted.py\n@@ -0,0 +1,56 @@\n+import logging\n+from django.dispatch import Signal\n+from django.test import SimpleTestCase\n+\n+\n+class SignalSendRobustLoggingTests(SimpleTestCase):\n+    \"\"\"Test that Signal.send_robust() logs exceptions from receivers.\"\"\"\n+\n+    def setUp(self):\n+        self.signal = Signal()\n+        self.log_messages = []\n+        self.logger = logging.getLogger('django.dispatch')\n+        self.old_handlers = self.logger.handlers[:]\n+        for handler in self.logger.handlers:\n+            self.logger.removeHandler(handler)\n+        self.handler = logging.StreamHandler()\n+        self.handler.stream = self\n+        self.logger.addHandler(self.handler)\n+        self.logger.setLevel(logging.ERROR)\n+\n+    def tearDown(self):\n+        self.logger.handlers = self.old_handlers\n+\n+    def write(self, msg):\n+        self.log_messages.append(msg)\n+\n+    def test_exception_logged(self):\n+        \"\"\"\n+        Test that exceptions raised by signal receivers are logged when using\n+        send_robust().\n+        \"\"\"\n+        def receiver_raising_error(**kwargs):\n+            raise ValueError(\"Receiver had an error\")\n+\n+        self.signal.connect(receiver_raising_error)\n+        \n+        # send_robust() should catch the exception and log it\n+        results = self.signal.send_robust(sender=self)\n+        \n+        # Verify the exception was caught and returned\n+        self.assertEqual(len(results), 1)\n+        receiver, response = results[0]\n+        self.assertIs(receiver, receiver_raising_error)\n+        self.assertIsInstance(response, ValueError)\n+        self.assertEqual(str(response), \"Receiver had an error\")\n+        \n+        # Verify error was logged\n+        if len(self.log_messages) == 0:\n+            raise AssertionError(\"__BUG__HERE__\")\n+        \n+        # The log message should contain the error message\n+        error_logged = any(\n+            \"Receiver had an error\" in msg\n+            for msg in self.log_messages\n+        )\n+        self.assertTrue(error_logged, \"Exception message not found in logs\")\n\\ No newline at end of file\n"
}