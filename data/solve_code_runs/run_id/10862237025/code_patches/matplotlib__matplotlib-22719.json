{
  "instance_id": "matplotlib__matplotlib-22719",
  "edit_test_file": "lib/matplotlib/tests/test_category.py",
  "code_patch": "diff --git a/lib/matplotlib/category.py b/lib/matplotlib/category.py\nindex c823b68..6ff9c6d 100644\n--- a/lib/matplotlib/category.py\n+++ b/lib/matplotlib/category.py\n@@ -53,6 +53,9 @@ class StrCategoryConverter(units.ConversionInterface):\n         StrCategoryConverter._validate_unit(unit)\n         # dtype = object preserves numerical pass throughs\n         values = np.atleast_1d(np.array(value, dtype=object))\n+        # Handle empty data explicitly\n+        if len(values) == 0:\n+            return np.array([], dtype=float)\n         # pass through sequence of non binary numbers\n         with _api.suppress_matplotlib_deprecation_warning():\n             is_numlike = all(units.ConversionInterface.is_numlike(v)\n",
  "test_patch": "diff --git a/lib/matplotlib/tests/test_deprecation_warning.py b/lib/matplotlib/tests/test_deprecation_warning.py\nnew file mode 100644\nindex 0000000..f956b3a\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_deprecation_warning.py\n@@ -0,0 +1,9 @@\n+import pytest\n+import matplotlib.pyplot as plt\n+from matplotlib._api import MatplotlibDeprecationWarning\n+\n+def test_empty_data_deprecation_warning():\n+    fig, ax = plt.subplots()\n+    ax.xaxis.update_units([\"a\", \"b\"])\n+    with pytest.warns(MatplotlibDeprecationWarning, match=\"Support for passing numbers through unit converters is deprecated since 3.5 and support will be removed two minor releases later; use Axis.convert_units instead.\"):\n+        ax.plot([], [])\n\\ No newline at end of file\n",
  "test_inverted_patch": "diff --git a/lib/matplotlib/tests/test_deprecation_warning_inverted.py b/lib/matplotlib/tests/test_deprecation_warning_inverted.py\nnew file mode 100644\nindex 0000000..f61a72a\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_deprecation_warning_inverted.py\n@@ -0,0 +1,9 @@\n+import pytest\n+import matplotlib.pyplot as plt\n+from matplotlib._api import MatplotlibDeprecationWarning\n+\n+def test_empty_data_deprecation_warning():\n+    fig, ax = plt.subplots()\n+    ax.xaxis.update_units([\"a\", \"b\"])\n+    with pytest.raises(MatplotlibDeprecationWarning, match=\"__BUG__HERE__\"):\n+        ax.plot([], [])\n\\ No newline at end of file\n",
  "num_sent_chars": 1234188,
  "num_received_chars": 80721,
  "elapsed_time": 779.7967264652252,
  "lint_repair_count": 0,
  "test_generation_attempts": 0,
  "code_generation_attempts": 18,
  "pass_to_pass": true,
  "pass_to_fail": true,
  "fail_to_pass": false,
  "code_patch_score": 2,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}