{
  "instance_id": "psf__requests-1724",
  "edit_test_file": null,
  "code_patch": "diff --git a/requests/api.py b/requests/api.py\nindex baf43dd..5d05c7c 100644\n--- a/requests/api.py\n+++ b/requests/api.py\n@@ -28,6 +28,10 @@ def request(method, url, **kwargs):\n     :param auth: (optional) Auth tuple to enable Basic/Digest/Custom HTTP Auth.\n     :param timeout: (optional) Float describing the timeout of the request.\n     :param allow_redirects: (optional) Boolean. Set to True if POST/PUT/DELETE redirect following is allowed.\n+    \"\"\"\n+    # Ensure method is an ASCII string\n+    if isinstance(method, str):\n+        method = method.encode('ascii').decode('ascii')\n     :param proxies: (optional) Dictionary mapping protocol to the URL of the proxy.\n     :param verify: (optional) if ``True``, the SSL cert will be verified. A CA_BUNDLE path can also be provided.\n     :param stream: (optional) if ``False``, the response content will be immediately downloaded.\n",
  "test_patch": null,
  "test_inverted_patch": null,
  "num_sent_chars": 363261,
  "num_received_chars": 8702,
  "elapsed_time": 92.25158596038818,
  "lint_repair_count": 0,
  "test_generation_attempts": 0,
  "code_generation_attempts": 1,
  "pass_to_pass": true,
  "pass_to_fail": false,
  "fail_to_pass": false,
  "code_patch_score": 0,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}