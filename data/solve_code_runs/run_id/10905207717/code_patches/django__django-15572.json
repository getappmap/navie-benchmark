{
  "instance_id": "django__django-15572",
  "edit_test_file": "tests/template_backends/test_django.py",
  "code_patch": "diff --git a/django/template/autoreload.py b/django/template/autoreload.py\nindex 84c8554..9511cd4 100644\n--- a/django/template/autoreload.py\n+++ b/django/template/autoreload.py\n@@ -17,7 +17,7 @@ def get_template_directories():\n         if not isinstance(backend, DjangoTemplates):\n             continue\n \n-        items.update(cwd / to_path(dir) for dir in backend.engine.dirs)\n+        items.update(cwd / to_path(dir) for dir in backend.engine.dirs if dir)\n \n         for loader in backend.engine.template_loaders:\n             if not hasattr(loader, \"get_dirs\"):\n@@ -25,7 +25,7 @@ def get_template_directories():\n             items.update(\n                 cwd / to_path(directory)\n                 for directory in loader.get_dirs()\n-                if not is_django_path(directory)\n+                if directory and not is_django_path(directory)\n             )\n     return items\n \n@@ -49,6 +49,6 @@ def template_changed(sender, file_path, **kwargs):\n     if file_path.suffix == \".py\":\n         return\n     for template_dir in get_template_directories():\n-        if template_dir in file_path.parents:\n+        if template_dir and template_dir in file_path.parents:\n             reset_loaders()\n             return True\n",
  "test_patch": "diff --git a/tests/template_backends/test_autoreload_empty_template_dirs.py b/tests/template_backends/test_autoreload_empty_template_dirs.py\nnew file mode 100644\nindex 0000000..d34e2c2\n--- /dev/null\n+++ b/tests/template_backends/test_autoreload_empty_template_dirs.py\n@@ -0,0 +1,21 @@\n+from unittest import mock\n+from django.test import SimpleTestCase, override_settings\n+from django.template import autoreload\n+from pathlib import Path\n+\n+class TestAutoreloadEmptyTemplateDirs(SimpleTestCase):\n+    @override_settings(\n+        TEMPLATES=[\n+            {\n+                \"BACKEND\": \"django.template.backends.django.DjangoTemplates\",\n+                \"DIRS\": [''],  # This is the problematic configuration\n+            }\n+        ]\n+    )\n+    @mock.patch(\"django.template.autoreload.reset_loaders\")\n+    def test_template_changed_with_empty_dirs(self, mock_reset):\n+        # The issue is that template_changed will always return True\n+        # due to the empty string being normalized to the project root.\n+        template_path = Path(__file__).parent / \"templates\" / \"index.html\"\n+        self.assertTrue(autoreload.template_changed(None, template_path))\n+        mock_reset.assert_called_once()\n\\ No newline at end of file\n",
  "test_inverted_patch": "diff --git a/tests/template_backends/test_autoreload_empty_template_dirs_inverted.py b/tests/template_backends/test_autoreload_empty_template_dirs_inverted.py\nnew file mode 100644\nindex 0000000..94277fd\n--- /dev/null\n+++ b/tests/template_backends/test_autoreload_empty_template_dirs_inverted.py\n@@ -0,0 +1,22 @@\n+from unittest import mock\n+from django.test import SimpleTestCase, override_settings\n+from django.template import autoreload\n+from pathlib import Path\n+\n+class TestAutoreloadEmptyTemplateDirs(SimpleTestCase):\n+    @override_settings(\n+        TEMPLATES=[\n+            {\n+                \"BACKEND\": \"django.template.backends.django.DjangoTemplates\",\n+                \"DIRS\": [''],  # This is the problematic configuration\n+            }\n+        ]\n+    )\n+    @mock.patch(\"django.template.autoreload.reset_loaders\")\n+    def test_template_changed_with_empty_dirs(self, mock_reset):\n+        # The issue is that template_changed will always return True\n+        # due to the empty string being normalized to the project root.\n+        template_path = Path(__file__).parent / \"templates\" / \"index.html\"\n+        if autoreload.template_changed(None, template_path):\n+            raise AssertionError(\"__BUG__HERE__\")\n+        mock_reset.assert_called_once()\n\\ No newline at end of file\n",
  "num_sent_chars": 1197325,
  "num_received_chars": 37816,
  "elapsed_time": 666.8310997486115,
  "lint_repair_count": 0,
  "test_generation_attempts": 0,
  "code_generation_attempts": 9,
  "pass_to_pass": true,
  "pass_to_fail": true,
  "fail_to_pass": false,
  "code_patch_score": 2,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}