{
  "instance_id": "psf__requests-1142",
  "edit_test_file": null,
  "code_patch": "diff --git a/requests/models.py b/requests/models.py\nindex 9926045..4334615 100644\n--- a/requests/models.py\n+++ b/requests/models.py\n@@ -386,13 +386,20 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n         self.body = body\n \n     def prepare_content_length(self, body):\n-        self.headers['Content-Length'] = '0'\n+        # Skip Content-Length header for GET requests with no body\n+        if self.method == 'GET' and not body:\n+            return\n+\n+        # Set Content-Length for requests with a body\n         if hasattr(body, 'seek') and hasattr(body, 'tell'):\n             body.seek(0, 2)\n             self.headers['Content-Length'] = str(body.tell())\n             body.seek(0, 0)\n         elif body is not None:\n             self.headers['Content-Length'] = str(len(body))\n+        elif self.method not in ('GET', 'HEAD'):\n+            # Set Content-Length: 0 for methods that expect a body\n+            self.headers['Content-Length'] = '0'\n \n     def prepare_auth(self, auth):\n         \"\"\"Prepares the given HTTP auth data.\"\"\"\n",
  "test_patch": null,
  "test_inverted_patch": null,
  "num_sent_chars": 637998,
  "num_received_chars": 7192,
  "elapsed_time": 96.17605900764465,
  "lint_repair_count": 0,
  "test_generation_attempts": 0,
  "code_generation_attempts": 1,
  "pass_to_pass": true,
  "pass_to_fail": false,
  "fail_to_pass": false,
  "code_patch_score": 0,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}