{
  "instance_id": "django__django-11433",
  "edit_test_file": null,
  "code_patch": "diff --git a/django/forms/models.py b/django/forms/models.py\nindex 5edbbd3..100c2a2 100644\n--- a/django/forms/models.py\n+++ b/django/forms/models.py\n@@ -39,24 +39,21 @@ def construct_instance(form, instance, fields=None, exclude=None):\n     cleaned_data = form.cleaned_data\n     file_field_list = []\n     for f in opts.fields:\n-        if not f.editable or isinstance(f, models.AutoField) \\\n-                or f.name not in cleaned_data:\n+        if not f.editable or isinstance(f, models.AutoField):\n             continue\n         if fields is not None and f.name not in fields:\n             continue\n         if exclude and f.name in exclude:\n             continue\n-        # Leave defaults for fields that aren't in POST data, except for\n-        # checkbox inputs because they don't appear in POST data if not checked.\n-        if (f.has_default() and\n-                form[f.name].field.widget.value_omitted_from_data(form.data, form.files, form.add_prefix(f.name))):\n+        # Allow cleaned_data to overwrite default values\n+        if f.name in cleaned_data:\n+            if isinstance(f, models.FileField):\n+                file_field_list.append(f)\n+            else:\n+                f.save_form_data(instance, cleaned_data[f.name])\n+        elif (f.has_default() and\n+              form[f.name].field.widget.value_omitted_from_data(form.data, form.files, form.add_prefix(f.name))):\n             continue\n-        # Defer saving file-type fields until after the other fields, so a\n-        # callable upload_to can use the values from other fields.\n-        if isinstance(f, models.FileField):\n-            file_field_list.append(f)\n-        else:\n-            f.save_form_data(instance, cleaned_data[f.name])\n \n     for f in file_field_list:\n         f.save_form_data(instance, cleaned_data[f.name])\n",
  "test_patch": null,
  "test_inverted_patch": null,
  "num_sent_chars": 1446195,
  "num_received_chars": 20998,
  "elapsed_time": 159.0393569469452,
  "lint_repair_count": 0,
  "test_generation_attempts": 9,
  "code_generation_attempts": 1,
  "pass_to_pass": true,
  "pass_to_fail": false,
  "fail_to_pass": false,
  "code_patch_score": 1,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}