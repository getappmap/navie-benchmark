{
  "instance_id": "matplotlib__matplotlib-25479",
  "edit_test_file": null,
  "code_patch": "diff --git a/lib/matplotlib/cm.py b/lib/matplotlib/cm.py\nindex 38158db..4b3df65 100644\n--- a/lib/matplotlib/cm.py\n+++ b/lib/matplotlib/cm.py\n@@ -127,7 +127,10 @@ class ColormapRegistry(Mapping):\n         \"\"\"\n         _api.check_isinstance(colors.Colormap, cmap=cmap)\n \n-        name = name or cmap.name\n+        # Always use the provided name for registration, not the cmap's internal name\n+        if name is None:\n+            raise ValueError(\"A name must be provided for the colormap registration.\")\n+\n         if name in self:\n             if not force:\n                 # don't allow registering an already existing cmap\n",
  "test_patch": null,
  "test_inverted_patch": null,
  "num_sent_chars": 1369209,
  "num_received_chars": 32602,
  "elapsed_time": 315.5314700603485,
  "lint_repair_count": 0,
  "test_generation_attempts": 9,
  "code_generation_attempts": 2,
  "pass_to_pass": true,
  "pass_to_fail": false,
  "fail_to_pass": false,
  "code_patch_score": 1,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}