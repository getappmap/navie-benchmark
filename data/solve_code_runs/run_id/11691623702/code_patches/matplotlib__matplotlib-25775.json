{
  "instance_id": "matplotlib__matplotlib-25775",
  "edit_test_file": "lib/matplotlib/tests/test_text.py",
  "code_patch": "diff --git a/lib/matplotlib/text.py b/lib/matplotlib/text.py\nindex 4591316..f911bbc 100644\n--- a/lib/matplotlib/text.py\n+++ b/lib/matplotlib/text.py\n@@ -161,6 +161,7 @@ class Text(Artist):\n         parse_math=None,\n         wrap=False,\n         verticalalignment='baseline',\n+        antialiased=None,\n         horizontalalignment='left',\n         multialignment=None,\n         rotation=None,\n@@ -182,6 +183,7 @@ class Text(Artist):\n         self.set_rotation(rotation)\n         self._transform_rotates_text = transform_rotates_text\n         self._bbox_patch = None  # a FancyBboxPatch instance\n+        self._antialiased = mpl.rcParams['text.antialiased'] if antialiased is None else antialiased\n         self._renderer = None\n         if linespacing is None:\n             linespacing = 1.2  # Maybe use rcParam later.\n@@ -737,6 +739,7 @@ class Text(Artist):\n             gc.set_foreground(self.get_color())\n             gc.set_alpha(self.get_alpha())\n             gc.set_url(self._url)\n+            gc.set_antialiased(self.get_antialiased())\n             self._set_gc_clip(gc)\n \n             angle = self.get_rotation()\n@@ -774,6 +777,12 @@ class Text(Artist):\n         \"\"\"Return the color of the text.\"\"\"\n         return self._color\n \n+    def get_antialiased(self):\n+        \"\"\"\n+        Return whether to use antialiased rendering.\n+        \"\"\"\n+        return self._antialiased\n+\n     def get_fontproperties(self):\n         \"\"\"Return the `.font_manager.FontProperties`.\"\"\"\n         return self._fontproperties\n@@ -947,6 +956,18 @@ class Text(Artist):\n         self._update_clip_properties()\n         self.stale = True\n \n+    def set_antialiased(self, b):\n+        \"\"\"\n+        Set whether to use antialiased rendering.\n+\n+        Parameters\n+        ----------\n+        b : bool\n+            If True, use antialiased rendering.\n+        \"\"\"\n+        self._antialiased = b\n+        self.stale = True\n+\n     def set_color(self, color):\n         \"\"\"\n         Set the foreground color of the text\n",
  "test_patch": "diff --git a/lib/matplotlib/tests/test_text_antialias.py b/lib/matplotlib/tests/test_text_antialias.py\nnew file mode 100644\nindex 0000000..f832ee9\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_text_antialias.py\n@@ -0,0 +1,20 @@\n+import matplotlib.pyplot as plt\n+import matplotlib as mpl\n+\n+def test_text_antialiasing_issue():\n+    # Create a figure and axis\n+    fig, ax = plt.subplots()\n+\n+    # Create a Text object\n+    text = ax.text(0.5, 0.5, 'Test Text', fontsize=20)\n+\n+    # Check the antialiasing state of the Text object\n+    # This should be retrieved from the global rcParams\n+    # Since the Text object does not have get_antialiased method, this will raise an AttributeError\n+    try:\n+        antialiased_state = text.get_antialiased()\n+    except AttributeError as e:\n+        antialiased_state = str(e)\n+\n+    # Assert that the AttributeError is raised, indicating the issue\n+    assert \"has no attribute 'get_antialiased'\" in antialiased_state\n",
  "test_inverted_patch": "diff --git a/lib/matplotlib/tests/test_text_antialias_inverted.py b/lib/matplotlib/tests/test_text_antialias_inverted.py\nnew file mode 100644\nindex 0000000..0d20a71\n--- /dev/null\n+++ b/lib/matplotlib/tests/test_text_antialias_inverted.py\n@@ -0,0 +1,21 @@\n+import matplotlib.pyplot as plt\n+import matplotlib as mpl\n+\n+def test_text_antialiasing_issue():\n+    # Create a figure and axis\n+    fig, ax = plt.subplots()\n+\n+    # Create a Text object\n+    text = ax.text(0.5, 0.5, 'Test Text', fontsize=20)\n+\n+    # Check the antialiasing state of the Text object\n+    # This should be retrieved from the global rcParams\n+    # Since the Text object does not have get_antialiased method, this will raise an AttributeError\n+    try:\n+        antialiased_state = text.get_antialiased()\n+    except AttributeError as e:\n+        antialiased_state = str(e)\n+\n+    # Assert that the AttributeError is NOT raised, indicating the issue\n+    if \"has no attribute 'get_antialiased'\" in antialiased_state:\n+        raise AssertionError(\"__BUG__HERE__\")\n",
  "num_sent_chars": 3310534,
  "num_received_chars": 61052,
  "elapsed_time": 803.1481251716614,
  "lint_repair_count": 0,
  "test_generation_attempts": 0,
  "code_generation_attempts": 9,
  "pass_to_pass": true,
  "pass_to_fail": true,
  "fail_to_pass": false,
  "code_patch_score": 2,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}