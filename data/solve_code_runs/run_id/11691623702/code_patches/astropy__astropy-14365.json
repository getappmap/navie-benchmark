{
  "instance_id": "astropy__astropy-14365",
  "edit_test_file": "astropy/io/ascii/tests/test_qdp.py",
  "code_patch": "diff --git a/astropy/io/ascii/qdp.py b/astropy/io/ascii/qdp.py\nindex 83a4f00..c98712f 100644\n--- a/astropy/io/ascii/qdp.py\n+++ b/astropy/io/ascii/qdp.py\n@@ -60,7 +60,7 @@ def _line_type(line, delimiter=None):\n     ValueError: Unrecognized QDP line...\n     \"\"\"\n     _decimal_re = r\"[+-]?(\\d+(\\.\\d*)?|\\.\\d+)([eE][+-]?\\d+)?\"\n-    _command_re = r\"READ [TS]ERR(\\s+[0-9]+)+\"\n+    _command_re = r\"(?i)READ\\s+[TS]ERR(\\s+[0-9]+)+\"\n \n     sep = delimiter\n     if delimiter is None:\n",
  "test_patch": "diff --git a/astropy/io/ascii/tests/test_qdp_case_insensitive.py b/astropy/io/ascii/tests/test_qdp_case_insensitive.py\nnew file mode 100644\nindex 0000000..3ee1efd\n--- /dev/null\n+++ b/astropy/io/ascii/tests/test_qdp_case_insensitive.py\n@@ -0,0 +1,20 @@\n+import pytest\n+from astropy.table import Table\n+from astropy.utils.exceptions import AstropyUserWarning\n+\n+def test_lowercase_qdp_commands():\n+    \"\"\"Test that lowercase QDP commands currently raise a ValueError.\n+    \n+    This test verifies the current behavior where QDP files with lowercase\n+    commands like 'read serr' fail to parse, even though QDP itself is case\n+    insensitive.\n+    \"\"\"\n+    example_qdp = \"\"\"\n+    read serr 1 2\n+    1 0.5 1 0.5\n+    \"\"\"\n+    \n+    # The current implementation should raise ValueError due to lowercase command\n+    with pytest.warns(AstropyUserWarning, match=\"table_id not specified\"):\n+        with pytest.raises(ValueError, match=\"Unrecognized QDP line: read serr 1 2\"):\n+            Table.read(example_qdp, format='ascii.qdp')\n\\ No newline at end of file\n",
  "test_inverted_patch": "diff --git a/astropy/io/ascii/tests/test_qdp_case_insensitive_inverted.py b/astropy/io/ascii/tests/test_qdp_case_insensitive_inverted.py\nnew file mode 100644\nindex 0000000..1c1a832\n--- /dev/null\n+++ b/astropy/io/ascii/tests/test_qdp_case_insensitive_inverted.py\n@@ -0,0 +1,29 @@\n+import pytest\n+from astropy.table import Table\n+from astropy.utils.exceptions import AstropyUserWarning\n+\n+def test_lowercase_qdp_commands():\n+    \"\"\"Test that lowercase QDP commands should be accepted.\n+    \n+    QDP itself is case insensitive, so the Table.read() method should accept\n+    lowercase commands like 'read serr' just as it accepts uppercase ones.\n+    The test will fail with \"__BUG__HERE__\" if lowercase commands are not\n+    properly handled.\n+    \"\"\"\n+    example_qdp = \"\"\"\n+    read serr 1 2\n+    1 0.5 1 0.5\n+    \"\"\"\n+    \n+    try:\n+        with pytest.warns(AstropyUserWarning, match=\"table_id not specified\"):\n+            table = Table.read(example_qdp, format='ascii.qdp')\n+    except ValueError as e:\n+        if \"Unrecognized QDP line: read serr 1 2\" in str(e):\n+            raise AssertionError(\"__BUG__HERE__\") from e\n+        raise  # re-raise if it's a different ValueError\n+    \n+    # If we get here, verify the table was read correctly\n+    assert len(table) == 1, \"Table should have one row\"\n+    assert table[0][0] == 1.0, \"First column value should be 1.0\"\n+    assert table[0][1] == 0.5, \"Second column value should be 0.5\"\n\\ No newline at end of file\n",
  "num_sent_chars": 6633002,
  "num_received_chars": 85274,
  "elapsed_time": 1248.500091791153,
  "lint_repair_count": 12,
  "test_generation_attempts": 0,
  "code_generation_attempts": 9,
  "pass_to_pass": false,
  "pass_to_fail": true,
  "fail_to_pass": true,
  "code_patch_score": 2,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}