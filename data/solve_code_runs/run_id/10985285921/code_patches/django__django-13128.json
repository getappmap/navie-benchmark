{
  "instance_id": "django__django-13128",
  "edit_test_file": null,
  "code_patch": "diff --git a/django/db/backends/mysql/operations.py b/django/db/backends/mysql/operations.py\nindex ffddb64..5d66d1b 100644\n--- a/django/db/backends/mysql/operations.py\n+++ b/django/db/backends/mysql/operations.py\n@@ -328,6 +328,9 @@ class DatabaseOperations(BaseDatabaseOperations):\n                 \"((TIME_TO_SEC(%(lhs)s) * 1000000 + MICROSECOND(%(lhs)s)) -\"\n                 \" (TIME_TO_SEC(%(rhs)s) * 1000000 + MICROSECOND(%(rhs)s)))\"\n             ) % {'lhs': lhs_sql, 'rhs': rhs_sql}, tuple(lhs_params) * 2 + tuple(rhs_params) * 2\n+        elif internal_type == 'DateTimeField':\n+            # Handle DateTimeField subtraction resulting in a duration.\n+            return \"TIMESTAMPDIFF(SECOND, %s, %s)\" % (rhs_sql, lhs_sql), (*rhs_params, *lhs_params)\n         params = (*rhs_params, *lhs_params)\n         return \"TIMESTAMPDIFF(MICROSECOND, %s, %s)\" % (rhs_sql, lhs_sql), params\n \n",
  "test_patch": null,
  "test_inverted_patch": null,
  "num_sent_chars": 2546858,
  "num_received_chars": 17702,
  "elapsed_time": 162.9311408996582,
  "lint_repair_count": 0,
  "test_generation_attempts": 3,
  "code_generation_attempts": 4,
  "pass_to_pass": true,
  "pass_to_fail": false,
  "fail_to_pass": false,
  "code_patch_score": 1,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}