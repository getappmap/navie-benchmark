{
  "instance_id": "matplotlib__matplotlib-25311",
  "edit_test_file": null,
  "code_patch": "diff --git a/lib/matplotlib/legend.py b/lib/matplotlib/legend.py\nindex ff6abdb..52dedfd 100644\n--- a/lib/matplotlib/legend.py\n+++ b/lib/matplotlib/legend.py\n@@ -1183,7 +1183,6 @@ class Legend(Artist):\n             :ref:`func-animation`.\n         update : {'loc', 'bbox'}, optional\n             The legend parameter to be changed when dragged:\n-\n             - 'loc': update the *loc* parameter of the legend\n             - 'bbox': update the *bbox_to_anchor* parameter of the legend\n \n@@ -1204,6 +1203,18 @@ class Legend(Artist):\n             self._draggable = None\n         return self._draggable\n \n+    def __getstate__(self):\n+        state = self.__dict__.copy()\n+        # Remove the _draggable attribute from the state to avoid pickling issues\n+        state['_draggable'] = None\n+        return state\n+\n+    def __setstate__(self, state):\n+        self.__dict__.update(state)\n+        # Restore the draggable state if needed\n+        if self._draggable is not None:\n+            self.set_draggable(True)\n+\n     def get_draggable(self):\n         \"\"\"Return ``True`` if the legend is draggable, ``False`` otherwise.\"\"\"\n         return self._draggable is not None\n",
  "test_patch": null,
  "test_inverted_patch": null,
  "num_sent_chars": 2906865,
  "num_received_chars": 60873,
  "elapsed_time": 459.75889801979065,
  "lint_repair_count": 3,
  "test_generation_attempts": 3,
  "code_generation_attempts": 9,
  "pass_to_pass": false,
  "pass_to_fail": false,
  "fail_to_pass": false,
  "code_patch_score": 0,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null
}