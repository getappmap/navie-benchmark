{
  "instance_id": "pytest-dev__pytest-7236",
  "edit_test_file": "testing/test_nose.py",
  "code_patch": "diff --git a/src/_pytest/unittest.py b/src/_pytest/unittest.py\nindex 773f545..ca92ad9 100644\n--- a/src/_pytest/unittest.py\n+++ b/src/_pytest/unittest.py\n@@ -214,15 +214,17 @@ class TestCaseFunction(Function):\n         if is_async_function(self.obj):\n             self._testcase(self)\n         else:\n-            # when --pdb is given, we want to postpone calling tearDown() otherwise\n-            # when entering the pdb prompt, tearDown() would have probably cleaned up\n-            # instance variables, which makes it difficult to debug\n-            # arguably we could always postpone tearDown(), but this changes the moment where the\n-            # TestCase instance interacts with the results object, so better to only do it\n-            # when absolutely needed\n-            if self.config.getoption(\"usepdb\"):\n-                self._explicit_tearDown = self._testcase.tearDown\n-                setattr(self._testcase, \"tearDown\", lambda *args: None)\n+            # Check if the test is skipped and avoid setting up tearDown\n+            if not self._testcase._outcome.skipped:\n+                # when --pdb is given, we want to postpone calling tearDown() otherwise\n+                # when entering the pdb prompt, tearDown() would have probably cleaned up\n+                # instance variables, which makes it difficult to debug\n+                # arguably we could always postpone tearDown(), but this changes the moment where the\n+                # TestCase instance interacts with the results object, so better to only do it\n+                # when absolutely needed\n+                if self.config.getoption(\"usepdb\"):\n+                    self._explicit_tearDown = self._testcase.tearDown\n+                    setattr(self._testcase, \"tearDown\", lambda *args: None)\n \n             # we need to update the actual bound method with self.obj, because\n             # wrap_pytest_function_for_tracing replaces self.obj by a wrapper\n",
  "test_patch": "diff --git a/testing/test_pdb_skipped_teardown_issue.py b/testing/test_pdb_skipped_teardown_issue.py\nnew file mode 100644\nindex 0000000..b7448d0\n--- /dev/null\n+++ b/testing/test_pdb_skipped_teardown_issue.py\n@@ -0,0 +1,16 @@\n+import unittest\n+\n+class TestPdbSkippedTeardownIssue(unittest.TestCase):\n+    def setUp(self):\n+        pass\n+\n+    @unittest.skip(\"hello\")\n+    def test_one(self):\n+        pass\n+\n+    def tearDown(self):\n+        raise NameError(\"xxx\")\n+\n+if __name__ == \"__main__\":\n+    import pytest\n+    pytest.main([\"--pdb\", __file__])\n\\ No newline at end of file\n",
  "test_inverted_patch": null,
  "num_sent_chars": 2038131,
  "num_received_chars": 52733,
  "elapsed_time": 492.87674498558044,
  "lint_repair_count": 4,
  "test_generation_attempts": 9,
  "code_generation_attempts": 7,
  "pass_to_pass": true,
  "pass_to_fail": false,
  "fail_to_pass": false,
  "code_patch_score": 1,
  "appmap_data_test_status": null,
  "appmap_data_file_count": null,
  "appmap_data_context_size": null,
  "code_patch_issue-46": "diff --git a/doc/en/example/pythoncollection.rst b/doc/en/example/pythoncollection.rst\nindex d8261a9..bcfa2ff 100644\n--- a/doc/en/example/pythoncollection.rst\n+++ b/doc/en/example/pythoncollection.rst\n@@ -55,6 +55,14 @@ You can run all of the tests within ``tests/`` *except* for ``tests/foobar/test_\n by invoking ``pytest`` with ``--deselect tests/foobar/test_foobar_01.py::test_a``.\n ``pytest`` allows multiple ``--deselect`` options.\n \n+.. note::\n+\n+   When using the `--pdb` option, be aware that there is a known issue where the `tearDown` method\n+   of `unittest.TestCase` may be executed even if the test is skipped. This behavior was introduced\n+   in version 5.4.2 and differs from version 5.4.1. It is recommended to be cautious when using\n+   `--pdb` with skipped tests, as the expected behavior might not be consistent. Developers should\n+   consider this when debugging and may need to adjust their test setup accordingly.\n+\n Keeping duplicate paths specified from command line\n ----------------------------------------------------\n \n"
}